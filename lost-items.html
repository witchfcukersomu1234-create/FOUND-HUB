<!DOCTYPE html>
<html lang="en" class="font-sans">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Found-Hub - Lost Items</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg:#1A1A1A; --panel:#262626; --text:#F5F5F5; --muted:#CCCCCC;
      --bar:#121212; --accent:#FFA500; --accent2:#FFD700;
    }
    body{background:var(--bg); color:var(--text);}
    .btn{background:var(--accent); color:#111; font-weight:600}
    .btn:hover{filter:brightness(1.05)}
    .badge{background:#1f1f1f; color:#c9c9c9; border:1px solid #333; border-radius:9999px; padding:2px 8px; font-size:12px}
    .card{background:var(--panel); border:1px solid #2a2a2a; border-radius:12px}
    .field{background:#1A1A1A; color:var(--text); border:1px solid #262626}
    .item-row{background:#1a1a1a;border:1px solid #2a2a2a;border-radius:10px}
  </style>
</head>
<body class="flex flex-col min-h-screen">

  <!-- NAV -->
  <header style="background-color: var(--bar); color: var(--text);" class="py-4 px-6">
    <div class="container mx-auto flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold">Found-Hub</a>
      <nav class="hidden md:flex items-center space-x-6">
        <a href="/index.html" class="hover:text-white" style="color: var(--muted);">Home</a>
        <a href="/about.html" class="hover:text-white" style="color: var(--muted);">About Us</a>
        <a href="/lost-items.html" class="hover:text-white font-bold !text-white" style="color: var(--muted);">Lost Items</a>
        <a href="/found-items.html" class="hover:text-white" style="color: var(--muted);">Found Items</a>
        <a href="/login-signup.html" class="hover:text-white" style="color: var(--muted);">Login/Sign-Up</a>
        <a href="/dashboard.html" class="hover:text-white" style="color: var(--muted);">Dashboard</a>
      </nav>
    </div>
  </header>

  <!-- HERO (same look) -->
  <section class="text-center flex flex-col items-center justify-center min-h-[35vh] p-8"
           style="background-image: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url('campus.avif'); background-size: cover; background-position: center;">
    <h2 class="text-4xl md:text-6xl font-bold" style="color: var(--accent2);">Report a Lost Item</h2>
    <p class="mt-4 text-lg md:text-xl max-w-3xl" style="color: var(--accent);">
      Help the community find your gadget. Describe it clearly and the last place you saw it.
    </p>
  </section>

  <!-- BODY -->
  <main class="container mx-auto px-4 py-8 grow">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- LEFT: form (UI preserved) -->
      <div class="card p-6">
        <h3 class="text-2xl font-bold mb-6">Submit details</h3>
        <!-- IMPORTANT: we only added ids; UI unchanged -->
        <form id="lostForm" class="space-y-5" onsubmit="return postLost(event)">
          <div>
            <label class="block text-sm mb-1" style="color: var(--muted);">Item Title</label>
            <input id="lostTitle" class="w-full rounded-md p-2 field" placeholder="e.g. HP Backpack" required />
          </div>
          <div>
            <label class="block text-sm mb-1" style="color: var(--muted);">Last seen location</label>
            <input id="lostLocation" class="w-full rounded-md p-2 field" placeholder="Lab 302, Library…" />
          </div>
          <div>
            <label class="block text-sm mb-1" style="color: var(--muted);">Category</label>
            <input id="lostCategory" class="w-full rounded-md p-2 field" placeholder="Bag, Phone, ID card…" />
          </div>
          <div>
            <label class="block text-sm mb-1" style="color: var(--muted);">Description</label>
            <textarea id="lostDesc" rows="3" class="w-full rounded-md p-2 field"
                      placeholder="Color, model, stickers, unique marks…"></textarea>
          </div>
          <button class="btn w-full rounded-md p-3" type="submit">Report Lost Item</button>
        </form>
      </div>

      <!-- RIGHT: list (UI preserved) -->
      <div class="card p-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-2xl font-bold">Lost board</h3>
          <div class="flex gap-2">
            <input id="lostSearch" class="field rounded-md px-3 py-2 w-72" placeholder="Search title, location, category"/>
            <button class="btn rounded-md px-3" onclick="loadLost()">Search</button>
          </div>
        </div>
        <div id="lostList" class="space-y-3">
          <!-- items render here -->
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer style="background-color: var(--bar); color: #CCCCCC;" class="py-6 px-4">
    <div class="container mx-auto text-center">
      <p>© 2025 Found-Hub. All rights reserved. Your College Campus Buddy.</p>
    </div>
  </footer>

  <!-- === BACKEND WIRING (no UI changes) === -->
  <script>
    // If you deploy later, set once in browser console:
    // localStorage.setItem('FH_API','https://your-railway-url'); location.reload();
    const API = localStorage.getItem('FH_API') || 'http://localhost:4000';
    const token = () => localStorage.getItem('fh_token');
    const auth = () => ({ 'Authorization': 'Bearer ' + token() });

    async function postLost(e){
      e.preventDefault();
      if(!token()){
        alert('Please login first.'); location.href = 'login-signup.html'; return false;
      }
      const fd = new FormData();
      fd.append('type','lost');
      fd.append('title', document.getElementById('lostTitle').value.trim());
      fd.append('location', document.getElementById('lostLocation').value.trim());
      fd.append('category', document.getElementById('lostCategory').value.trim());
      fd.append('description', document.getElementById('lostDesc').value.trim());

      const r = await fetch(`${API}/api/items`, { method:'POST', headers: auth(), body: fd });
      const res = await r.json();
      if(res.error){ alert(res.error); return false; }
      document.getElementById('lostForm').reset();
      loadLost();
      return false;
    }

    function itemRow(i){
      return `
        <div class="item-row p-3">
          <div class="flex items-center justify-between">
            <div class="font-semibold">${i.title}</div>
            <span class="badge">${i.location || ''}</span>
          </div>
          <div class="text-sm mt-1 text-gray-300">${i.description || ''}</div>
        </div>`;
    }

    async function loadLost(){
      const q = document.getElementById('lostSearch').value.trim();
      const url = new URL(`${API}/api/items`);
      url.searchParams.set('type','lost');
      if(q) url.searchParams.set('q', q);
      const r = await fetch(url);
      const items = await r.json();
      document.getElementById('lostList').innerHTML =
        items.length ? items.map(itemRow).join('') : `<div class="text-gray-400">No lost posts yet.</div>`;
    }

    // initial load
    loadLost();
  </script>
</body>
</html>
